I see that `pop_focus_overlay` does call `cx.notify()` at line 180. So Oracle's Task 2 finding about missing `cx.notify()` in `close_actions_popup` is partially mitigated — when the non-callback path runs, `pop_focus_overlay` will call `cx.notify()`. However, when `callback_restored_focus` is true, that path is skipped and there's no `cx.notify()`. Let me verify the `callback_restored_focus = true` path more carefully.

Looking at the code: when `callback_restored_focus` is true, `pop_focus_overlay` is skipped, and `apply_pending_focus` may or may not succeed. If `apply_pending_focus` returns false, the fallback `window.focus()` runs but no `cx.notify()` is called. So there IS a path without `cx.notify()`. That said, `window.focus()` typically triggers a repaint, so this may be benign. Let me moderate the finding.

For the env prompt, the finding is solid — `submit()` takes `&mut self` without `cx`, so it cannot call `cx.notify()` after setting `validation_error`.

Here are the **Oracle GPT-5.2 Pro findings** — 3 swarm tasks for UX polish:

---

### Task 1: `fix-inputfield-text-token`

**Scope:** `src/theme/helpers.rs, src/theme/tests/helpers.rs`

**Task:** In `src/theme/helpers.rs:53`, `InputFieldColors::from_color_scheme` maps the input text color to `rgb(colors.text.on_accent)`. The `on_accent` token is `0xffffff` (white) in both dark AND light themes — it's designed for text rendered on accent-colored badges. On a light theme, this makes input text invisible (white on white background). The fix: change to `rgb(colors.text.primary)`.

Also update the corresponding unit test (`test_input_field_colors_text_uses_text_on_accent_from_scheme`) to assert against `text.primary` instead.

---

### Task 2: `notify-after-close-actions-popup`

**Scope:** `src/app_impl/actions_dialog.rs`

**Task:** `close_actions_popup` mutates `show_actions_popup = false` and `actions_dialog = None` (render-driving fields). When `callback_restored_focus` is true, the `pop_focus_overlay` path (which calls `cx.notify()`) is skipped, and the only fallback is `window.focus()` — which does NOT guarantee a repaint of state driven by `show_actions_popup`. Adding `cx.notify()` at the end makes the close self-contained.

---

### Task 3: `env-prompt-error-notify`

**Scope:** `src/prompts/env/prompt.rs, src/prompts/env/render.rs`

**Task:** `EnvPrompt::submit` and `submit_delete` set `self.validation_error = Some(...)` on error paths but take `&mut self` (no `cx`), so they can never call `cx.notify()`. Users press Enter, validation fails, and nothing visible happens until the next unrelated UI event triggers a repaint. Fix: thread `cx: &mut Context<Self>` into `submit`/`submit_delete` and call `cx.notify()` after setting `validation_error`.

---

**NEXT_AREA:** `src/components/prompt_header/component.rs` — verify actions-mode focus restore + key routing, especially around switching between main filter input and actions search input.
