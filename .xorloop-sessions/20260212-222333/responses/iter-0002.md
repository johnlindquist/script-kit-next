Interesting — `browser.rs` is not exported from `mod.rs` (it's not listed), and nothing imports `kit_store::browser`. Let me re-check `mod.rs` carefully — it exports `discover`, `git_ops`, `manifest`, `storage` but NOT `browser`.

Looking at `browser.rs` more closely, it's actually the same content as what I read from the file path. Let me check — the content I read from `browser.rs` is the GitHub search API code. Wait, that was the content under `browser.rs` path... Let me re-check the mod.rs:

`mod.rs` lines 7-10: `pub mod discover; pub mod git_ops; pub mod manifest; pub mod storage;` — no `browser`. So `browser.rs` is an orphaned file, not compiled.

Now I have everything needed for a thorough documentation gap analysis. Here's the report:

---

## Documentation Gap Analysis: `src/kit_store/`

### Critical

**1. Orphaned file `browser.rs` is dead code — never compiled**
- **Severity**: critical
- **File**: `src/kit_store/browser.rs`
- **Issue**: `browser.rs` exists (contains `KitSearchResult`, `search_github_kits`, `fetch_kit_readme`, and all GitHub API plumbing) but is NOT declared in `mod.rs`. The module exports `discover`, `git_ops`, `manifest`, `storage` — no `browser`. Nothing in the codebase imports `kit_store::browser`. The real kit store UI logic lives in `src/render_builtins/kit_store.rs`, which duplicates the git operations inline. This is not a documentation gap per se — it's dead code that creates confusion.
- **Fix**: Either add `pub mod browser;` to `mod.rs` and wire it into the render builtin, or delete `browser.rs` entirely. At minimum, add a `// FIXME: not yet wired` comment if keeping it as a staging area.

### Major

**2. `KitManifest` struct fields undocumented**
- **Severity**: major  
- **File**: `src/kit_store/mod.rs:14-29`
- **Issue**: `KitManifest` has a struct-level doc comment but none of its 7 fields (`name`, `description`, `author`, `version`, `repo_url`, `scripts`, `scriptlets`) have field-level `///` docs. The distinction between `scripts` (`.ts` filenames) and `scriptlets` (`.md` filenames?) is unclear. The `repo_url` format (HTTPS? SSH? both?) is unspecified.
- **Fix**: Add `///` doc comments to each field explaining expected content and format. E.g., `/// GitHub-style HTTPS clone URL (e.g. "https://github.com/user/kit.git")`.

**3. `InstalledKit` struct fields undocumented**
- **Severity**: major  
- **File**: `src/kit_store/mod.rs:31-39`
- **Issue**: `InstalledKit` has a struct doc but no field docs. `git_hash` (short or full SHA?), `installed_at` (what format — ISO 8601? RFC 3339?), and `path` (absolute? relative to kits root?) are all ambiguous.
- **Fix**: Add `///` to each field. E.g., `/// Full 40-character git commit SHA at time of install`, `/// ISO 8601 timestamp of installation (e.g. "2026-02-07T21:30:00Z")`.

**4. `KitSearchResult` fields undocumented**
- **Severity**: major
- **File**: `src/kit_store/browser.rs:22-30`
- **Issue**: Same pattern — struct doc exists, field docs missing. `full_name` (is this `owner/repo`?), `updated_at` (GitHub format?), `html_url` vs `clone_url` distinction unclear.
- **Fix**: Add field-level docs. Note: this file may be dead code (see item 1).

**5. `git_ops.rs` uses `Result<_, String>` instead of `anyhow::Result`**
- **Severity**: major
- **File**: `src/kit_store/git_ops.rs:9,41,67`
- **Issue**: `install_kit`, `update_kit`, and `remove_kit` all return `Result<_, String>` while `manifest.rs` and `storage.rs` use `anyhow::Result`. No documentation explains why the error type differs. The render builtin in `src/render_builtins/kit_store.rs` also uses `Result<_, String>` for its own git helpers, duplicating logic from `git_ops.rs` rather than calling it.
- **Fix**: Document the error convention, or (better) unify on `anyhow::Result` across the module. At minimum add `/// # Errors` sections to each function.

**6. Missing `/// # Errors` sections on all fallible public functions**
- **Severity**: major
- **Files**: `git_ops.rs` (`install_kit`, `update_kit`, `remove_kit`), `manifest.rs` (`parse_kit_manifest`), `storage.rs` (`list_installed_kits`, `get_kit`, `save_kit_registry`, `remove_kit`)
- **Issue**: Rust convention (`clippy::missing_errors_doc`) requires `/// # Errors` sections on public functions returning `Result`. None of the 8 public fallible functions have one.
- **Fix**: Add `/// # Errors` subsections listing when each function fails. E.g., for `install_kit`: "Returns `Err` if the repo URL is empty, `git clone` fails, or the kits directory cannot be created."

### Minor

**7. `discover.rs` hardcodes `~/.scriptkit/kits/` but `storage.rs` uses `get_kit_path()`**
- **Severity**: minor
- **File**: `src/kit_store/discover.rs:14` vs `src/kit_store/storage.rs:8`
- **Issue**: `discover_installed_kits()` uses `dirs::home_dir().join(".scriptkit").join("kits")` while `storage.rs` uses `get_kit_path().join("kit-store.json")`. Neither documents what `get_kit_path()` returns or what the canonical kit root is. If `get_kit_path()` ever differs from `~/.scriptkit`, they'll silently disagree.
- **Fix**: Document the filesystem layout contract in `mod.rs` module docs. E.g., "Kits are stored under `~/.scriptkit/kits/<name>/` with a registry at `~/.scriptkit/kit-store.json`."

**8. `git_ops.rs:73` — `kits_root_path()` uses `env::var("HOME")` fallback to `"~"`**
- **Severity**: minor
- **File**: `src/kit_store/git_ops.rs:72-75`
- **Issue**: The `"~"` fallback is not shell-expanded — `PathBuf::from("~").join(".scriptkit")` produces `~/. scriptkit` which is a literal relative path, not the home directory. No doc comment warns about this. Meanwhile `discover.rs` uses `dirs::home_dir()` which does the right thing.
- **Fix**: Document (or fix) the discrepancy. Prefer `dirs::home_dir()` consistently.

**9. `manifest.rs` — `scripts` field semantic confusion with `package.json`**
- **Severity**: minor
- **File**: `src/kit_store/manifest.rs:59,119`
- **Issue**: `extract_string_list(&value, "scripts")` reads `package.json`'s `scripts` field, but in npm convention that's `{"build": "tsc", ...}` — an object of command names → shell commands, not a list of script files. The code handles this by extracting object keys (line 119), yielding `["build", "install"]` which are npm script *names*, not Script Kit script filenames. This semantic mismatch is undocumented.
- **Fix**: Add a doc comment in `parse_package_json_manifest` explaining: "When `scripts` is an object (npm convention), extracts the object keys as script names rather than values."

**10. No module-level architecture comment in `mod.rs`**
- **Severity**: minor
- **File**: `src/kit_store/mod.rs:1`
- **Issue**: The module doc `//! Types and persistence helpers for the git-based kit store.` is minimal. It doesn't explain the module's overall architecture: discovery → search → install → manifest parsing → registry tracking. The relationship between the 5 submodules is undocumented.
- **Fix**: Expand the module doc to describe the flow and which submodule handles each phase.

**11. `browser.rs` constants not documented**
- **Severity**: minor
- **File**: `src/kit_store/browser.rs:9-18`
- **Issue**: 9 constants (`GITHUB_API_BASE_URL`, `GITHUB_KIT_TOPICS`, timeout values) have no comments. `GITHUB_KIT_TOPICS` being `["scriptkit-kit", "script-kit"]` is a discovery convention that should be documented.
- **Fix**: Add `///` docs explaining why two topics are searched and what the timeout values represent.

---

**NEXT_AREA**: `src/render_builtins/kit_store.rs` — the UI rendering layer that duplicates git operations from `git_ops.rs` rather than calling it, and contains the actual install/update/remove logic the app uses. Analysis category: code duplication and architectural debt.
