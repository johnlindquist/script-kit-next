<previous-analyses>
Here's the summary:

- **Critical DB/UI thread blocking**: FTS triggers fire unnecessarily on every upsert (not just content changes), and synchronous SQLite writes plus per-keystroke queries block the render loop, causing UI jank.
- **Redundant per-frame computation**: Full-buffer scans for stats, lowercase content matching, and markdown re-parsing happen every render frame instead of being cached and invalidated on change.
- **Excessive allocations in hot paths**: Unnecessary string clones on keystrokes, double allocations from `NoteId::as_str()`, per-comparison `to_lowercase()` in sorts, and full-content clones for delete/restore waste memory in tight loops.

NEXT_SEED: CommandBar action filtering and ranking performance — whether it loads full note content or metadata-only rows, and virtualization of action list rendering.
---
- **Critical safety docs needed**: Three files (`keystroke_logger.rs`, `text_injector.rs`, `keyword_manager/mod.rs`) lack safety/privacy documentation for sensitive operations — keystroke recording, synthetic input injection to focused apps, clipboard overwrites, and system-wide keyboard monitoring requiring Accessibility permissions.

- **14 major API/architecture gaps**: Public structs and functions across the text-expansion pipeline are undocumented — no `///` docs, no module-level `//!` architecture overviews, no `# Errors` sections, and no explanation of the dataflow (monitor → matcher → lookup → substitution → injector) or threading model.

- **Minor polish items**: Five items covering missing usage examples for keystroke logger, text injector, keyword matcher, and scriptlet formatting, plus one stale `// Public API for future use` comment that should be removed or converted to a stability note.

NEXT_SEED: `crate::keyboard_monitor` — event model, permission behavior, error types, and callback threading guarantees
---
I need to understand what "this analysis" refers to. Since there's no specific analysis document attached or referenced, I'll summarize the key analysis evident from the current project context (git status, architecture, and memory).

- Script Kit GPUI is a Rust+TypeScript rewrite with a bidirectional JSONL protocol, GPUI-based rendering, and a built-in command pipeline (`BuiltInFeature` enum → entry generation → execution → view rendering).

- The codebase enforces strict conventions: no `unwrap()` in production, no `part_*.rs` files, mandatory `cargo check && clippy && test` verification gate, and a pre-commit bot that reviews diffs with Claude Opus to reject resource leaks and dead code.

- Active work spans UI components (button, footer, dialog), platform cursor support, and AVFoundation camera capture using zero-copy Metal rendering via `CVPixelBuffer` surfaces instead of `RenderImage`.

NEXT_SEED: the bidirectional JSONL stdin/stdout protocol between bun scripts and the Rust app shell
---
</previous-analyses>

Do NOT repeat items already covered above. Find something new.
## Feature Under Review

FEATURE: Frecency scoring system that ranks scripts by combining usage frequency and recency via exponential half-life decay, with atomic persistence and cache-invalidation revision tracking.
FILES: src/frecency/mod.rs, src/scripts/grouping/grouped_view.rs, src/app_impl/filtering_cache.rs, src/config/defaults.rs, src/main_sections/app_state.rs

## Analysis Category

security audit: scan for injection risks, authz gaps, secret leaks, unsafe deserialization, path traversal

## Instructions

1. Analyze the feature described above through the lens of: security audit
2. Be specific: reference actual file paths, function names, line ranges
3. Output a prioritized checklist of actionable improvements
4. For each item: severity (critical/major/minor), file path, concrete fix description
5. End with: NEXT_AREA: <suggest one unexplored area for future analysis>
