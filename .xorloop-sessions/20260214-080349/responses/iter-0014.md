OK, CODEMAP.md line 41 references `window_control_enhanced/`. That should be cleaned up too.

Now I have everything. Here are the refined swarm tasks:

---

### Task 1: `panel-prune-dead-code`

**Scope:** `src/panel.rs`

**Task:**
In `src/panel.rs`, the file-level `#![allow(dead_code)]` on line 1 hides several types and functions that have zero production callers — they are only exercised by co-located tests. The dead items are: the `WindowVibrancy` enum (lines 22-43, including `is_blurred()` and `is_opaque()` methods); the `PlaceholderConfig` struct (lines 111-159, including `Default` impl, `new()`, `log_state_change()`, `log_cursor_position()`); the local `CursorStyle` struct (lines 209-251, including `Default` impl, `large()`, `medium()`, `small()` constructors — NOTE: this is NOT the same as `gpui::CursorStyle` or `theme::types::CursorStyle` which are used elsewhere); `panel_footer_colors()` (lines 91-95); and the constants `CURSOR_HEIGHT_SM` (line 190) and `CURSOR_HEIGHT_MD` (line 193). Delete all of these items and the module doc comment on lines 3-6 that references them.

Remove the `#![allow(dead_code)]` on line 1. Then prune the `#[cfg(test)] mod tests` block: delete `test_default_vibrancy`, `test_vibrancy_is_blurred`, `test_vibrancy_is_opaque`, `test_default_placeholder_text` (only if `DEFAULT_PLACEHOLDER` is tested elsewhere — actually keep this one as it tests a live constant), `test_placeholder_config_default`, `test_placeholder_config_new`, `test_placeholder_cursor_at_left_by_default`, `test_cursor_heights_proportional`, `test_cursor_style_default_is_large`, `test_cursor_style_constructors`, and `test_panel_footer_colors_match_prompt_footer_tokens_in_light_and_dark_modes`, `test_panel_footer_surface_matches_prompt_footer_surface_opacity_rules`. Keep: `test_cursor_width_constant`, `test_cursor_height_lg_matches_text_lg`, `test_cursor_margin_constant`, `running_status_message_uses_shared_prefix`, `window_visible_edge_margin_is_positive`.

DO NOT delete any of these externally-used items: `HEADER_PADDING_X`, `HEADER_PADDING_Y`, `HEADER_GAP`, `HEADER_BUTTON_HEIGHT`, `HEADER_DIVIDER_HEIGHT`, `HEADER_TOTAL_HEIGHT`, `PROMPT_INPUT_FIELD_HEIGHT`, `WINDOW_VISIBLE_EDGE_MARGIN`, `CURSOR_WIDTH`, `CURSOR_GAP_X`, `CURSOR_HEIGHT_LG`, `CURSOR_MARGIN_Y`, `DEFAULT_PLACEHOLDER`, `SCRIPT_RUNNING_STATUS_PREFIX`, `running_status_message()`. Verify with `cargo check && cargo clippy --all-targets -- -D warnings && cargo test`. If removing `#![allow(dead_code)]` reveals new warnings on items you didn't delete (e.g. `HEADER_BUTTON_HEIGHT` or `HEADER_DIVIDER_HEIGHT` which are only used to compute `HEADER_TOTAL_HEIGHT`), add targeted `#[allow(dead_code)]` on those specific items rather than keeping the blanket suppression.

---

### Task 2: `remove-window-control-enhanced`

**Scope:** `src/window_control_enhanced/**, src/lib.rs, Cargo.toml, CODEMAP.md`

**Task:**
The entire `window_control_enhanced` module is dead code. It is declared in `src/lib.rs` at lines 70-73 behind a feature gate `#[cfg(feature = "window-control-enhanced")]`, and the feature `window-control-enhanced = []` is defined in `Cargo.toml` at line 156. No code anywhere in the crate imports or references `window_control_enhanced::` — only comments and external markdown files do. The actively-used sibling `window_control` module (without `_enhanced`) must be left completely untouched.

Delete the entire `src/window_control_enhanced/` directory (6 files: `mod.rs`, `bounds.rs`, `capabilities.rs`, `coords.rs`, `display.rs`, `spaces.rs`). In `src/lib.rs`, remove lines 70-73 (the comment and the `#[cfg(feature = "window-control-enhanced")] pub(crate) mod window_control_enhanced;` declaration). In `Cargo.toml`, remove the feature entry `window-control-enhanced = []` at line 156. In `CODEMAP.md`, edit line 41 to remove the `and src/window_control_enhanced/` reference — change it from `- src/panel.rs, src/window_control.rs and src/window_control_enhanced/ panel-level behavior and control.` to `- src/panel.rs and src/window_control.rs panel-level behavior and control.`.

Do NOT touch any files outside this scope. Do NOT modify the `window_control` module (without _enhanced). Verify with `cargo check && cargo clippy --all-targets -- -D warnings && cargo test`. The build must succeed with no module-resolution errors and no warnings.

---

NEXT_AREA: `src/app_launcher/` module — `db_cache.rs`, `icon_cache.rs`, `scanning.rs`, and `core_types.rs` all have `#[allow(dead_code)]` suppressions and may contain orphaned types/functions from earlier architectural iterations that are no longer called by the launch pipeline.
