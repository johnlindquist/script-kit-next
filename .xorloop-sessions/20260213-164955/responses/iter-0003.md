Got the full Oracle response. Here's the GPT-5.2 Pro analysis:

---

## Oracle Analysis: Refactor Runtime Fallback Chain in `runner.rs`

GPT-5.2 Pro identified 3 tasks to eliminate the duplicated try/match/log fallback pattern across `execute_script_interactive()` and `execute_script()`:

### Task 1: `agent-core-fallback-abstraction`
**Scope:** `src/executor/runner.rs`

Add a `RuntimeAttempt` struct + `run_fallback_chain<T>()` generic helper above both functions. The struct captures attempt metadata (name, cmd, args, preload flag, bench hooks) and provides logging methods (`log_trying`, `log_failed`, `info_ok_spawn`, `info_ok_command`, `log_success_*`). The generic `run_fallback_chain()` iterates attempts, calls a `Run` closure, handles bench logging, and returns `Option<T>` â€” no trait objects, fully monomorphized.

### Task 2: `agent-refactor-execute_script_interactive`
**Scope:** `src/executor/runner.rs`

Replace the 3 copy-pasted `match spawn_script(...)` blocks (lines 592-657) with: build a `Vec<RuntimeAttempt>` (bun+preload if SDK, bun if TS, node if JS), then call `run_fallback_chain()` with `spawn_script` as the runner. Preserves `#[instrument]`, bench logs, and the final error message verbatim.

### Task 3: `agent-refactor-execute_script_blocking`
**Scope:** `src/executor/runner.rs`

Same refactor for `execute_script()` (lines 769-869): build attempts (kit always, bun+preload if TS+SDK, bun if TS, node if JS), run through `run_fallback_chain()` with `run_command` as runner. Preserves SDK logging and final error text.

**NEXT_AREA:** Consider whether `execute_script()` should handle stderr vs stdout more predictably (currently returns stderr when stdout is empty, even on success).

---

Note: All 3 tasks target the same file so they'd need to be sequenced rather than truly parallel, or combined into a single worker. Want me to implement this refactor?
