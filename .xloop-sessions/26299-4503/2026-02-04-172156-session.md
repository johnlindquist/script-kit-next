# Session: Progressive disclosure for list items

## Files changed
- `src/list_item.rs` — all changes in one file

## What was improved
- Descriptions hidden on non-selected, non-hovered items (Spotlight/Raycast pattern)
- Descriptions reappear when selected, hovered, or during search/filter
- Tool badges (e.g., "ts", "bash") hidden on non-selected items unless filtering
- Source hints (e.g., "main", "cleanshot") hidden on non-selected items unless filtering
- Shortcut badges kept always visible (keyboard discoverability)
- Computed `is_filtering` flag from `highlight_indices` / `description_highlight_indices` presence

## Design rationale
Research across Raycast, Spotlight, Alfred, VS Code Command Palette, and Linear shows the consensus pattern: launchers show icon + name in the list, with details revealed on demand via selection or search. Descriptions on every item at any opacity still create vertical density and texture noise. Hiding them entirely on non-focused items is the single highest-impact change for reducing visual busyness.

## What to avoid repeating
- The `is_filtering` variable must be computed before both the description block and the accessories block — it was initially scoped inside the description `if let` and had to be hoisted.
- `LIST_ITEM_HEIGHT` stays at 40px regardless of description visibility; the flex container's `justify_center()` handles vertical centering when only name is present.
- Type tags are already search-only by design; they don't need the progressive disclosure gate.
- Pre-existing clippy errors in test files and `ai/window.rs` are unrelated to `list_item.rs` changes.
