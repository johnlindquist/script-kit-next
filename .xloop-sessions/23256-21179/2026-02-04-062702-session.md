# Session: Auto-generate script descriptions, kit origin hints, tag visibility

## Files Changed
- `src/designs/mod.rs` — extracted helper functions, auto-description logic, improved grouped-view hints, 19 new tests

## What Was Improved

### 1. Auto-generated descriptions for scripts without them
Scripts without explicit descriptions now show contextual fallbacks:
- Scheduled scripts: "Scheduled: every weekday at 9am" or "Cron: 0 0 * * *"
- File watchers: "Watches: ~/.config/**" (truncated at 40 chars)
- Background scripts: "Background process"
- System scripts: "System event handler"
- Plain scripts: filename as fallback (e.g., "my-script.ts") when it differs from the display name

Previously only scriptlets got auto-descriptions (tool type). Now scripts do too.

### 2. Kit name as grouped-view source hint
In the grouped view, scripts from non-main kits now show the kit name as a source hint when no alias or tags are displayed. This is especially useful in the SUGGESTED section where scripts from different kits are mixed together without visible origin context.

### 3. Tags shown alongside alias badge
Previously, when a script's alias was the badge, tags were never shown. Now tags are displayed as the hint even when alias occupies the badge slot. The priority chain is: alias → tags → kit name.

### 4. Scriptlet group origin hints
Scriptlets without any badge (no shortcut, keyword, or alias) now show their group name as a source hint (e.g., "Development", "Productivity"), excluding "main".

### 5. Extracted testable helper functions
Refactored inline rendering logic into three `pub(crate)` functions:
- `auto_description_for_script()` — description generation with priority chain
- `grouped_view_hint_for_script()` — hint logic for scripts in grouped view
- `grouped_view_hint_for_scriptlet()` — hint logic for scriptlets in grouped view

### 6. Tests
Added 19 tests covering auto-description and hint logic:
- 9 auto-description tests (explicit preservation, cron, schedule priority, watch, truncation, background, system, filename fallback, same-name-no-desc)
- 8 script hint tests (shortcut+alias, shortcut+tags, alias+tags, alias+kit, no-badge+tags, no-badge+kit, main-kit-hidden)
- 2 scriptlet hint tests (group shown, main group hidden)

## What to Avoid Repeating
- Pre-existing build errors in `ai/window.rs` and `prompts/markdown.rs` on main — use `cargo check --lib`, `cargo clippy --lib`, `cargo test --lib` to bypass bin-only errors
- The pre-commit hook checks ALL files' formatting, not just staged files — run `cargo fmt` before committing
- `scripts::types` is a private module — use re-exported types via `crate::scripts::Script`, not `crate::scripts::types::Script`
- Other agents may lock files via `.claude-locks/` — skip locked files
