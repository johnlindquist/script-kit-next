# Session: Improve AI Chat UX (Tooltips, Error Help, Input Feedback)

## Files Changed
- `src/ai/window.rs` — 6 UX improvements: timestamp tooltips, error classification, collapse word count, submit dimming, attachment indicator

## What Was Improved
1. **Full timestamp tooltip on messages** — Hovering relative time ("3m ago") now shows exact datetime ("February 4, 2026 at 6:21 AM") via native Tooltip. Added to both message headers and sidebar chat items.
2. **Error classification with contextual help** — `render_streaming_error()` now parses error text for common patterns (401/403=auth, 429=rate limit, timeout, network, 5xx=server) and shows a helpful hint below the error message.
3. **Collapse toggle with word count** — "Show more" now reads "Show more (245 more words)"; "Show less" reads "Show less (312 words)" — helps users decide whether to expand long messages.
4. **Submit button dim when empty** — Submit button text color fades to `muted_foreground.opacity(0.3)` when input is empty and no image is attached. Cursor pointer also removed when disabled.
5. **Attachment indicator dot on plus button** — When an image is pending, the plus button gets an accent-colored border and a small accent dot in the top-right corner, plus the icon changes to accent color.
6. **Sidebar chat item timestamp tooltip** — Same full datetime tooltip as messages, shown on the relative time in sidebar chat items.

## What to Avoid Repeating
- Linter may silently revert file changes — always re-read files after any tool rejection before re-editing
- `div()` needs `.id()` before `.tooltip()` — GPUI requires stateful elements for tooltip handlers
- `full_timestamp` and `full_chat_time` use `chrono` format `%B %-d, %Y at %-I:%M %p` — the `%-` prefix strips leading zeros
- When computing `input_is_empty`, also check `has_pending_image` to allow submitting images with no text
- Pre-existing clippy errors in test files — use `cargo clippy --lib` to verify library code only
